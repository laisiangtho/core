/*!
    scriptive -- Javascript application service
    Version 1.0.3-2017.04.04
    https://scriptive.github.io/core
*/
!function(t,e,n){"use strict";var i="ontouchstart"in n.documentElement?"touchstart":"click";Object.defineProperty(Object.prototype,"each",{enumerable:!1,value:function(t){var e={object:function(e){var n=0,i=Object.keys(e).length;for(var r in e)e.hasOwnProperty(r)&&(n++,t(r,e[r],e,n==i))},array:function(e){for(var n=e.length,i=0;i<n;i++)t(i,e[i],e,i==n-1)}};return e[this.constructor===Object?"object":"array"](this)}}),Object.defineProperties(Object.prototype,{merge:{value:function(){for(var t,e=arguments,n=0,i=e.length;n<i;n++)if(e[n].isObject())for(var r in e[n])try{t?this.hasOwnProperty(r)?this[r].isArray()||e[n][r].isArray()?this[r]=this[r].merge(e[n][r]):this[r].merge(t,e[n][r]):this[r]=e[n][r]:this[r].isArray()||this[r].isObject()?this[r]=this[r].merge(e[n][r]):this[r]=e[n][r]}catch(t){this[r]=e[n][r]}else 0===n&&(t=e[n]);return this}},hasMethodProperty:{value:function(t){return this.hasOwnProperty(t)&&this.isFunction(t)}},isEmpty:{value:function(){return this.isObject()?0===Object.keys(this).length:this.isArray()?this.length:void 0}},isFunction:{value:function(t){return t?"function"==typeof this[t]:this.constructor===Function}},isNumeric:{value:function(t){return t?this.hasOwnProperty(t)&&!isNaN(parseFloat(this[t]))&&isFinite(this[t]):!isNaN(parseFloat(this))&&isFinite(this)}},isObject:{value:function(){return this.constructor===Object}},isArray:{value:function(){return this.constructor===Array}},count:{value:function(){return Object.keys(this).length}},paramater:{value:function(t){var e=this;return t?t.isArray()||(t=[t]):t=[],t.push(Object.keys(e).reduce(function(t,n){return t.push(n+"="+encodeURIComponent(e[n])),t},[]).join("&")),t.toSentence("/","?")}}}),Object.defineProperties(Array.prototype,{remove:{value:function(){for(var t,e,n=arguments,i=n.length;i&&this.length;)for(t=n[--i];(e=this.indexOf(t))!==-1;)this.splice(e,1);return this}},merge:{value:function(t){return this.concat(t).filter(function(t,e,n){return n.indexOf(t)===e})}},unique:{value:function(){return this.filter(function(t,e,n){return n.indexOf(t)===e})}},has:{value:function(t){if(this.indexOf(t)>-1)return t;for(var e=0;e<this.length;e++)if(this[e]==t)return t}},toSentence:{value:function(t,e){return this.length>1?[this.slice(0,-1).join(t||", "),this.slice(-1)[0]].join(e||" & "):this.join()}}}),Object.defineProperties(Element.prototype,{styleDisplay:{value:function(t){return t?(this.style.display=t,this):"none"!==e.getComputedStyle(this,null).getPropertyValue("display")}},toggleDisplay:{value:function(t,e){var n=this.styleDisplay();return n&&"function"==typeof e?e(this):"function"==typeof t&&t(this),this.styleDisplay(n?"none":"block")}},toggleClass:{value:function(t,e,n){return this.classList.toggle(t),this.classList.contains(t)&&"function"==typeof e?e(this):"function"==typeof n&&n(this),this}},removeClass:{value:function(t){return this.classList.remove(t),this}},addClass:{value:function(t){return this.classList.add(t),this}},hasClass:{value:function(t){return this.classList.contains(t)}},removeAttr:{value:function(t){return this.removeAttribute(t),this}},addAttr:{value:function(t,e){return this.setAttribute(t,e),this}},addContent:{value:function(t){return this.innerHTML=t,this}},emptyElement:{value:function(){for(;this.firstChild;)this.removeChild(this.firstChild);return this}},removeElement:{value:function(){var t=this.parentNode;return t.removeChild(this),t}},eventHandler:{value:function(t,e,n){return!!this.hasOwnProperty(t)||(this.addEventListener(t,e,n),void(this[t]=!0))}},removeHandler:{value:function(t,e,n){this.removeEventListener(t,e,n),delete this[t]}},eventClick:{value:function(t,e){if(this.hasOwnProperty(i))return this;if(/touch/.test(i)){var n=!0;this.addEventListener("touchstart",function(){n=!0},e),this.addEventListener("touchcancel",function(){n=!1},e),this.addEventListener("touchmove",function(){n=!1},e),this.addEventListener("touchend",function(e){n&&t(e)},e)}else this.addEventListener(i,t,e);return this[i]=!0,this}},removeClick:{value:function(t,e){if(this.hasOwnProperty(i)){if(/touch/.test(i)){var n=!0;this.removeEventListener("touchstart",function(){n=!0},e),this.removeEventListener("touchcancel",function(){n=!1},e),this.removeEventListener("touchmove",function(){n=!1},e),this.removeEventListener("touchend",function(e){n&&t(e)},e)}else this.removeEventListener(i,t,e);delete this[i]}return this}}});var r="app",o=":unique",a={i0:function(t){var e=typeof t;if(a.f0.hasOwnProperty(e))return a.f0[e](t)},f0:{object:function(t){return s.merge(t)},string:function(t){return r=t,e[t]=s}},device:{platform:{is:function(t){return navigator.userAgent.toLowerCase().indexOf(t)!==-1},ios:function(){return this.iphone()||this.ipod()||this.ipad()},iphone:function(){return!this.windows()&&this.is("iphone")},ipod:function(){return this.is("ipod")},ipad:function(){return this.is("ipad")},android:function(){return!this.windows()&&this.is("android")},apd:function(){return this.android()&&this.is("mobile")},adt:function(){return this.android()&&!this.is("mobile")},blackberry:function(){return this.is("blackberry")||this.is("bb10")||this.is("rim")},bbp:function(){return this.blackberry()&&!this.is("tablet")},bbt:function(){return this.blackberry()&&this.is("tablet")},windows:function(){return this.is("windows")},wdp:function(){return this.windows()&&this.is("phone")},wdt:function(){return this.windows()&&this.is("touch")&&!this.wdp()},fxos:function(){return(this.is("(mobile;")||this.is("(tablet;"))&&this.is("; rv:")},ffp:function(){return this.fxos()&&this.is("mobile")},fft:function(){return this.fxos()&&this.is("tablet")},meego:function(){return this.is("meego")},cordova:function(){return e.cordova&&"file:"==location.protocol},chrome:function(){return s.config.Browser==s.config.Platform||"chrome"==s.config.Browser},nodeWebkit:function(){return"object"==typeof window.process},mobile:function(){return this.apd()||this.iphone()||this.ipod()||this.wdp()||this.bbp()||this.ffp()||this.meego()},tablet:function(){return this.ipad()||this.adt()||this.bbt()||this.wdt()||this.fft()}},browser:function(){return(navigator.userAgent.indexOf("Opera")||navigator.userAgent.indexOf("OPR"))!=-1?"opera":navigator.userAgent.indexOf("Chrome")!=-1?"chrome":navigator.userAgent.indexOf("Safari")!=-1?"safari":navigator.userAgent.indexOf("Firefox")!=-1?"firefox":navigator.userAgent.indexOf("MSIE")!=-1||1==!!n.documentMode?"ie":"unknown"},agent:function(t){var e=[],n=[];s.config.Browser=this.browser(),s.config.isCordova=this.platform.cordova(),s.config.isChrome=this.platform.chrome(),s.config.Platform||(s.config.Platform=s.config.DeviceName.web),s.config.Screen||(s.config.Screen=s.config.DeviceName.desktop),this.platform.mobile()?s.config.Screen=s.config.DeviceName.mobile:this.platform.tablet()&&(s.config.Screen=s.config.DeviceName.tablet),this.platform.ios()?s.config.Device=s.config.DeviceName.ios:this.platform.android()?s.config.Device=s.config.DeviceName.android:this.platform.hasMethodProperty(s.config.Device)||(s.config.Device=s.config.DeviceName.defaults),s.config.hasOwnProperty("DeviceTemplate")&&s.config.DeviceTemplate.constructor===Array?s.config.DeviceTemplate.forEach(function(t){s.config.hasOwnProperty(t)&&Config[t].constructor===String?n.push(Config[t]):"string"==typeof t&&n.push(t)}):s.config.Platform==s.config.DeviceName.web?n.push(s.config.DeviceName.defaults,s.config.Screen):n.push(s.config.Device,s.config.Screen),s.config.DeviceTemplate=n,"object"==typeof t&&(s.config.hasOwnProperty("DeviceAgent")&&s.config.DeviceAgent.constructor===Array?s.config.DeviceAgent.forEach(function(t){s.config.hasOwnProperty(t)&&Config[t].constructor===String?e.push(Config[t]):"string"==typeof t&&e.push(t)}):e.push(s.config.Platform,s.config.Screen,s.config.Device));var i=[],r=[];if(e.length)for(var o in e){r.push(e[o]);for(var a in t)t.hasOwnProperty(a)&&t[a].constructor===Array&&t[a].filter(function(t){return t==o}).length&&i.push({type:a,name:r.join(".")})}return i},orientate:function(t){n.querySelector(s.config.Orientation.element)&&(e.addEventListener?e.addEventListener(t,this.orientateClass,!1):e.attachEvent?e.attachEvent(t,this.orientateClass):e[t]=this.orientateClass,this.orientateClass())},orientateClass:function(){n.querySelector(s.config.Orientation.element).setAttribute("class",e.innerHeight<e.innerWidth?s.config.Orientation.landscape:s.config.Orientation.portrait)}},hash:function(){var t,n=s.config.hash,i=e.location.hash.split("?");if(i.length){for(var r=i[0].split("/"),o=0;o<r.length;o++)r[o]&&(0==o?n.page=r[o].replace(/#/,""):n[o]=r[o]);if(i.length>1)for(var a=/([^\?#&=]+)=([^&]*)/g;t=a.exec(i[1]);)n[t[1]]=t[2]}return n},idUnique:function(t){s.config.hasOwnProperty("idUnique")?s.config.idUnique.search(o)<0&&(s.config.idUnique=s.config.idUnique+o):"string"==typeof t?t.search(o)<0?s.config.idUnique=t+o:s.config.idUnique=t:s.config.idUnique=r+o},data:{execute:function(t,e){var n=t.shift();if(this.hasOwnProperty(n)){if(this.isFunction(n))return this[n](e);if(t.length)return a.data.execute.call(this[n],t,e)}return!1},link:function(t){n.querySelectorAll("[0]".replace(0,t)).each(function(e,n){n.styleDisplay()&&n.eventClick(function(){a.data.execute.call(s,n.getAttribute(t).split(" ").filter(function(t){return t}),n)})})},content:function(t){n.querySelectorAll("[0]".replace(0,t)).each(function(e,n){n.styleDisplay()&&a.data.execute.call(s,n.getAttribute(t).split(" ").filter(function(t){return t}),n)})}},meta:{locale:{script:{attr:{src:null},extension:".js",dir:"js/"},link:{attr:{rel:"stylesheet",href:null},extension:".css",dir:"css/"}},oblige:function(t){var e=[];for(var n in t)for(var i in t[n])e.push({type:n,name:t[n][i].toString().replace(" ",".")});return e},append:function(t){delete s.config.Meta.agent,s.config.Meta=this.oblige(s.config.Meta).concat(t),this.attach()},attach:function(){try{var t=this,e=s.config.Meta.shift(),i=e.type,r=(e.dir||t.locale[i].dir)+e.name+t.locale[i].extension,o=n.createElement(i);t.locale[i].attr.each(function(t,e){o[t]=e||r}),o.onerror=function(){t.attach()},o.onload=function(){s.notification(e.name),s.config.Meta.length?t.attach():t.listen()},n.head.appendChild(o)}catch(t){this.listen()}},listen:function(){s.notification("getting ready..."),s.config.isCordova?n.addEventListener("deviceready",this.initiate,!1):this.initiate()},initiate:function(){a.hash(),s.config.Execute.each(function(t,e){t="object"==typeof e?Object.keys(e)[0]:e,a.data.execute.call(s,t.split(" "),e[t])})}}},s={config:{Meta:{agent:{script:[0,1,2],link:[0,1,2]}},Execute:["initiate"],Handler:i,dataLink:"data-link",dataContent:"data-content",Platform:"web",Screen:"desktop",DeviceName:{desktop:"desktop",tablet:"tablet",mobile:"mobile",ios:"ios",android:"android",defaults:"default",web:"web",app:"app"},Orientation:{landscape:"landscape",portrait:"portrait",element:"html"},hash:{},todo:{},msg:{info:"#msg"},name:"app",version:"1.0.3",build:"1.0.2"},document:function(t){t.hasOwnProperty("config")&&t.config.constructor===Object&&(s.config.merge(t.config),t.config.hasOwnProperty("Meta")&&t.config.Meta.hasOwnProperty("agent")&&(s.config.Meta.agent=t.config.Meta.agent)),n.addEventListener("DOMContentLoaded",function(i){t.hasOwnProperty("ready")&&t.ready.call(s,i),"string"==typeof s.config.msg.info&&(s.config.msg.info=n.querySelector(s.config.msg.info)),a.idUnique(s.config.id),1!=s.config.Orientation.isEmpty()&&a.device.orientate(e.hasOwnProperty.call(e,"onorientationchange")?"orientationchange":"resize"),"object"==typeof s.config.Meta?a.meta.append(a.device.agent(s.config.Meta.agent)):a.meta.listen(),new MutationObserver(function(t){s.dataLink()}).observe(n.body,{attributes:!0,subtree:!0})},!1)},notification:function(){if(null!==s.config.msg.info)return arguments.length>1?s.config.msg.info.setAttribute(arguments[0],arguments[1]):s.config.msg.info.innerHTML=arguments[0],s.config.msg.info},dataLink:function(t){a.data.link(t?t:s.config.dataLink)},dataContent:function(t){a.data.content(t?t:s.config.dataContent)},metaLink:function(t){t.each(function(t,i){e[i]=n.querySelector("link[rel=0]".replace(0,i)).getAttribute("href")})},metaContent:function(t){t.each(function(t,i){e[i]=n.querySelector("meta[name=0]".replace(0,i)).getAttribute("content")})},localStorage:{name:{},storage:e.localStorage,select:function(t,e){var e=this.storage.getItem(this.ids(t));try{this.name[t]=e?JSON.parse(e):{}}catch(n){this.name[t]=e}finally{return this}},insert:function(t,e){var n=this.ids(t);return"object"==typeof e?this.storage.setItem(n,JSON.stringify(e)):this.storage.setItem(n,e),this.name[t]=e,this},update:function(t,e){return this.insert(t,e||this.name[t])},delete:function(t){return this.storage.removeItem(this.ids(t)),this},deleteAll:function(t){return this.storage.clear(),this},ids:function(t){return s.config.idUnique.replace(/unique/,t)}},hashChange:function(t){e.addEventListener("hashchange",function(e){"function"==typeof t&&(a.hash(),t(e))},!1)},elementCreate:function(t){return n.createElement(t)},elementSelect:function(t){return n.querySelector(t)},elementId:function(t){return n.getElementById(t)},elementAll:function(t){return n.querySelectorAll(t)},elementClassname:function(t){return n.getElementsByClassName(t)},elementTagname:function(t){return n.getElementsByTagName(t)},Toggle:{menu:function(t,e,n){var i=t.parentNode,r=function(){for(var n=t.nextElementSibling.firstElementChild;n.firstChild;)n.removeChild(n.firstChild);"function"==typeof e&&e(n)},o=function(t){i.contains(t.target)||a()},a=function(){i.classList.remove("active"),document.body.removeEventListener(s.config.Handler,o),"function"==typeof n&&n()};i.classList.contains("active")&&r(),t.eventClick(function(t){i.toggleClass("active",function(){document.body.addEventListener(s.config.Handler,o),r()},function(){a()})})},dialog:function(t,e){if(s.hasOwnProperty("dialog")&&s.dialog.hasOwnProperty("container")){var n=s.dialog.container(),i=n.firstElementChild,r=function(){var e=i.firstElementChild.emptyElement();"function"==typeof t&&t(e)},o=function(){n.styleDisplay("none").removeClick(c)},a=function(){"function"==typeof e&&e(n).then(o)},c=function(t){var e=t.target;i.contains(e)&&(e.classList.contains("okey")?a():e.classList.contains("cancel")&&o())};r(),n.styleDisplay("block").eventClick(c)}},nav:function(t,e,n){if(s.hasOwnProperty("nav")&&s.nav.hasOwnProperty("container")){var i=s.localStorage.name.query.page,r=s.nav.container(),o=r.firstElementChild,a=o.firstElementChild,c=a.nextElementSibling,u=function(){var t=c.firstElementChild;if(t){var n=t.querySelector("li.active");n&&n.getAttribute("id")!=i&&(n.classList.remove("active"),t.querySelector("#"+i).classList.add("active"))}else t=c.appendChild(document.createElement("ul")),s.config.page.each(function(e,n){var i=document.createElement("li"),r=document.createElement("p"),o=document.createElement("a");o.setAttribute("href","#page?".replace(/page/,e));var a=s.nav.hasOwnProperty("pageName")?s.nav.pageName(e):e;o.classList.add(n.class),o.setAttribute("data-title",a),i.setAttribute("id",e),i.setAttribute("title",a),s.localStorage.name.query.page==e&&i.classList.add("active"),r.appendChild(o),i.appendChild(r),t.appendChild(i)});"function"==typeof e&&e(r)},f=function(e){o.contains(e.target)||e.target==t||l(),e.stopPropagation()},l=function(){o.setAttribute("class","slide-out"),c.emptyElement(),"function"==typeof n&&n(r),document.body.classList.contains("nav")||document.body.removeClick(f),r.styleDisplay("none")};return r.styleDisplay()&&u(),t.eventClick(function(t){r.toggleDisplay(function(){o.setAttribute("class","slide-in"),u(),document.body.classList.contains("nav")||document.body.eventClick(f)},function(){l()}),t.stopPropagation()},!1),r}},header:function(t,e,n){if(s.hasOwnProperty("header")&&s.header.hasOwnProperty("container")){var i=s.header.container(),r=i.firstElementChild,o=r.lastElementChild,a=o.firstElementChild,c=o.querySelector("ul."+s.localStorage.name.query.page),u=o.querySelector("ul.active");return new Promise(function(t,e){c?c.classList.contains("active")!==!0?(u&&u.classList.remove("active"),c.classList.add("active"),t()):e():a.classList.contains("active")!==!0?(a!=u&&u&&u.classList.remove("active"),a.classList.add("active"),t()):e()}).then(function(){return!0},function(){return!1})}},main:function(t){if(s.hasOwnProperty("main")&&s.main.hasOwnProperty("container")){var e=s.main.container(),n="div.active",i=e.querySelector(n),r=e.querySelector(n.replace("active",s.localStorage.name.query.page));return r?r.classList.contains("active")||r.classList.add("active"):(r=e.firstElementChild,r.classList.contains("active")||r.classList.add("active")),i&&r!=i&&i.classList.remove("active"),t&&r.emptyElement(),r}},footer:function(t,e,n){}}};e[t]=function(t){return new a.i0(t)}}("scriptive",window,document);