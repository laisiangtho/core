/*!
    scriptive -- Javascript application service
    Version 1.0.3-2017.03.21
    https://scriptive.github.io/core
*/
!function(t,e,n){"use strict";var i="ontouchstart"in n.documentElement?"touchstart":"click";Object.defineProperty(Object.prototype,"each",{enumerable:!1,value:function(t){var e={object:function(e){var n=0,i=Object.keys(e).length;for(var o in e)n++,e.hasOwnProperty(o)&&t(o,e[o],e,n==i)},array:function(e){for(var n=e.length,i=0;i<n;i++)t(i,e[i],e,i==n-1)}};return e[this.constructor===Object?"object":"array"](this)}}),Object.defineProperties(Object.prototype,{merge:{value:function(){for(var t,e=arguments,n=0,i=e.length;n<i;n++)if(e[n].isObject())for(var o in e[n])try{t?this.hasOwnProperty(o)?this[o].isArray()||e[n][o].isArray()?this[o]=this[o].merge(e[n][o]):this[o].merge(t,e[n][o]):this[o]=e[n][o]:this[o].isArray()||this[o].isObject()?this[o]=this[o].merge(e[n][o]):this[o]=e[n][o]}catch(t){this[o]=e[n][o]}else 0===n&&(t=e[n]);return this}},hasMethodProperty:{value:function(t){return this.hasOwnProperty(t)&&this.isFunction(t)}},isEmpty:{value:function(){return this.isObject()?0===Object.keys(this).length:this.isArray()?this.length:void 0}},isFunction:{value:function(t){return t?"function"==typeof this[t]:this.constructor===Function}},isNumeric:{value:function(t){return t?this.hasOwnProperty(t)&&!isNaN(parseFloat(this[t]))&&isFinite(this[t]):!isNaN(parseFloat(this))&&isFinite(this)}},isObject:{value:function(){return this.constructor===Object}},isArray:{value:function(){return this.constructor===Array}},count:{value:function(){return Object.keys(this).length}},paramater:{value:function(t){var e=this;return t?t.isArray()||(t=[t]):t=[],t.push(Object.keys(e).reduce(function(t,n){return t.push(n+"="+encodeURIComponent(e[n])),t},[]).join("&")),t.toSentence("/","?")}}}),Object.defineProperties(Array.prototype,{remove:{value:function(){for(var t,e,n=arguments,i=n.length;i&&this.length;)for(t=n[--i];(e=this.indexOf(t))!==-1;)this.splice(e,1);return this}},merge:{value:function(t){return this.concat(t).filter(function(t,e,n){return n.indexOf(t)===e})}},unique:{value:function(){return this.filter(function(t,e,n){return n.indexOf(t)===e})}},has:{value:function(t){if(this.indexOf(t)>-1)return t;for(var e=0;e<this.length;e++)if(this[e]==t)return t}},toSentence:{value:function(t,e){return this.length>1?[this.slice(0,-1).join(t||", "),this.slice(-1)[0]].join(e||" & "):this.join()}}}),Object.defineProperties(Element.prototype,{styleDisplay:{value:function(t){return t?(this.style.display=t,this):"none"!==e.getComputedStyle(this,null).getPropertyValue("display")}},toggleDisplay:{value:function(t,e){var n=this.styleDisplay();return n&&"function"==typeof e?e():"function"==typeof t&&t(),this.styleDisplay(n?"none":"block")}},toggleClass:{value:function(t,e,n){return this.classList.toggle(t),this.classList.contains(t)&&"function"==typeof e?e():"function"==typeof n&&n(),this}},emptyContainer:{value:function(){for(;this.firstChild;)this.removeChild(this.firstChild);return this}},removeContainer:{value:function(){return this.parentNode.removeChild(this)}},eventHandler:{value:function(t,e,n){return!!this.hasOwnProperty(t)||(this.addEventListener(t,e,n===!0),void(this[t]=!0))}},removeHandler:{value:function(t,e,n){this.removeEventListener(t,e,n===!0),delete this[t]}},eventClick:{value:function(t,e){if(this.hasOwnProperty(i))return!0;if(e=1==e,/touch/.test(i)){var n=!0;this.addEventListener("touchstart",function(){n=!0},e),this.addEventListener("touchcancel",function(){n=!1},e),this.addEventListener("touchmove",function(){n=!1},e),this.addEventListener("touchend",function(e){n&&t(e)},e)}else this.addEventListener(i,t,e);this[i]=!0}},removeClick:{value:function(t,e){if(this.hasOwnProperty(i)){if(e=!!e,/touch/.test(i)){var n=!0;this.removeEventListener("touchstart",function(){n=!0},e),this.removeEventListener("touchcancel",function(){n=!1},e),this.removeEventListener("touchmove",function(){n=!1},e),this.removeEventListener("touchend",function(e){n&&t(e)},e)}else this.removeEventListener(i,t,e);delete this[i]}}}});var o="app",r=":unique",a={init:function(t){var e=typeof t;if(a.fn.hasOwnProperty(e))return a.fn[e](t)},fn:{object:function(t){return a.root.merge(t)},string:function(t){return o=t,e[t]=a.root}},callback:{before:function(t){return t},progress:function(t){return t},done:function(t){return t},fail:function(t){return t},success:function(t){return t}},device:{platform:{is:function(t){return navigator.userAgent.toLowerCase().indexOf(t)!==-1},ios:function(){return this.iphone()||this.ipod()||this.ipad()},iphone:function(){return!this.windows()&&this.is("iphone")},ipod:function(){return this.is("ipod")},ipad:function(){return this.is("ipad")},android:function(){return!this.windows()&&this.is("android")},apd:function(){return this.android()&&this.is("mobile")},adt:function(){return this.android()&&!this.is("mobile")},blackberry:function(){return this.is("blackberry")||this.is("bb10")||this.is("rim")},bbp:function(){return this.blackberry()&&!this.is("tablet")},bbt:function(){return this.blackberry()&&this.is("tablet")},windows:function(){return this.is("windows")},wdp:function(){return this.windows()&&this.is("phone")},wdt:function(){return this.windows()&&this.is("touch")&&!this.wdp()},fxos:function(){return(this.is("(mobile;")||this.is("(tablet;"))&&this.is("; rv:")},ffp:function(){return this.fxos()&&this.is("mobile")},fft:function(){return this.fxos()&&this.is("tablet")},meego:function(){return this.is("meego")},cordova:function(){return e.cordova&&"file:"==location.protocol},chrome:function(){return a.root.config.Browser==a.root.config.Platform||"chrome"==a.root.config.Browser},nodeWebkit:function(){return"object"==typeof window.process},mobile:function(){return this.apd()||this.iphone()||this.ipod()||this.wdp()||this.bbp()||this.ffp()||this.meego()},tablet:function(){return this.ipad()||this.adt()||this.bbt()||this.wdt()||this.fft()}},browser:function(){return(navigator.userAgent.indexOf("Opera")||navigator.userAgent.indexOf("OPR"))!=-1?"opera":navigator.userAgent.indexOf("Chrome")!=-1?"chrome":navigator.userAgent.indexOf("Safari")!=-1?"safari":navigator.userAgent.indexOf("Firefox")!=-1?"firefox":navigator.userAgent.indexOf("MSIE")!=-1||1==!!n.documentMode?"ie":"unknown"},agent:function(t){var e=[],n=[];a.root.config.Browser=this.browser(),a.root.config.isCordova=this.platform.cordova(),a.root.config.isChrome=this.platform.chrome(),a.root.config.Platform||(a.root.config.Platform=a.root.config.DeviceName.web),a.root.config.Screen||(a.root.config.Screen=a.root.config.DeviceName.desktop),this.platform.mobile()?a.root.config.Screen=a.root.config.DeviceName.mobile:this.platform.tablet()&&(a.root.config.Screen=a.root.config.DeviceName.tablet),this.platform.ios()?a.root.config.Device=a.root.config.DeviceName.ios:this.platform.android()?a.root.config.Device=a.root.config.DeviceName.android:this.platform.hasMethodProperty(a.root.config.Device)||(a.root.config.Device=a.root.config.DeviceName.defaults),a.root.config.hasOwnProperty("DeviceTemplate")&&a.root.config.DeviceTemplate.constructor===Array?a.root.config.DeviceTemplate.forEach(function(t){a.root.config.hasOwnProperty(t)&&Config[t].constructor===String?n.push(Config[t]):"string"==typeof t&&n.push(t)}):a.root.config.Platform==a.root.config.DeviceName.web?n.push(a.root.config.DeviceName.defaults,a.root.config.Screen):n.push(a.root.config.Device,a.root.config.Screen),a.root.config.DeviceTemplate=n,"object"==typeof t&&(a.root.config.hasOwnProperty("DeviceAgent")&&a.root.config.DeviceAgent.constructor===Array?a.root.config.DeviceAgent.forEach(function(t){a.root.config.hasOwnProperty(t)&&Config[t].constructor===String?e.push(Config[t]):"string"==typeof t&&e.push(t)}):e.push(a.root.config.Platform,a.root.config.Screen,a.root.config.Device));var i=[],o=[];if(e.length)for(var r in e){o.push(e[r]);for(var s in t)t.hasOwnProperty(s)&&t[s].constructor===Array&&t[s].filter(function(t){return t==r}).length&&i.push({type:s,name:o.join(".")})}return i},orientate:function(t){n.querySelector(a.root.config.Orientation.element)&&(e.addEventListener?e.addEventListener(t,this.orientateClass,!1):e.attachEvent?e.attachEvent(t,this.orientateClass):e[t]=this.orientateClass,this.orientateClass())},orientateClass:function(){n.querySelector(a.root.config.Orientation.element).setAttribute("class",e.innerHeight<e.innerWidth?a.root.config.Orientation.landscape:a.root.config.Orientation.portrait)}},hash:function(){var t,n=this.root.config.hash,i=e.location.hash.split("?");if(i.length){for(var o=i[0].split("/"),r=0;r<o.length;r++)o[r]&&(0==r?n.page=o[r].replace(/#/,""):n[r]=o[r]);if(i.length>1)for(var a=/([^\?#&=]+)=([^&]*)/g;t=a.exec(i[1]);)n[t[1]]=t[2]}return n},idUnique:function(t){"string"==typeof t?t.search(r)<0?this.root.config.idUnique=t+r:this.root.config.idUnique=t:this.root.config.idUnique=o+r},data:{execute:function(t,e){var n=t.shift();if(this.hasOwnProperty(n)){if(this.isFunction(n))return this[n](e);if(t.length)return a.data.execute.call(this[n],t,e)}return!1},link:function(t){n.querySelectorAll("[0]".replace(0,t)).each(function(e,n){n.styleDisplay()&&n.eventClick(function(){a.data.execute.call(a.root,n.getAttribute(t).split(" ").filter(function(t){return t}),n)})})},content:function(t){n.querySelectorAll("[0]".replace(0,t)).each(function(e,n){n.styleDisplay()&&a.data.execute.call(a.root,n.getAttribute(t).split(" ").filter(function(t){return t}),n)})}},meta:{locale:{script:{attr:{src:null},extension:".js",dir:"js/"},link:{attr:{rel:"stylesheet",href:null},extension:".css",dir:"css/"}},oblige:function(t){var e=[];for(var n in t)for(var i in t[n])e.push({type:n,name:t[n][i].toString().replace(" ",".")});return e},append:function(t){delete a.root.config.Meta.agent,a.root.config.Meta=this.oblige(a.root.config.Meta).concat(t),this.attach()},attach:function(){try{var t=this,e=a.root.config.Meta.shift(),i=e.type,o=(e.dir||t.locale[i].dir)+e.name+t.locale[i].extension,r=n.createElement(i);t.locale[i].attr.each(function(t,e){r[t]=e||o}),r.onerror=function(){t.attach()},r.onload=function(){a.root.notification(e.name),a.root.config.Meta.length?t.attach():t.listen()},n.head.appendChild(r)}catch(t){this.listen()}},listen:function(){a.root.notification("getting ready..."),a.root.config.isCordova?n.addEventListener("deviceready",this.initiate,!1):this.initiate()},initiate:function(){a.hash(),a.root.config.Execute.each(function(t,e){t="object"==typeof e?Object.keys(e)[0]:e,a.data.execute.call(a.root,t.split(" "),e[t])})}},root:{config:{Meta:{agent:{script:[0,1,2],link:[0,1,2]}},Execute:["initiate"],Handler:i,dataLink:"data-link",dataContent:"data-content",Platform:"web",Screen:"desktop",DeviceName:{desktop:"desktop",tablet:"tablet",mobile:"mobile",ios:"ios",android:"android",defaults:"default",web:"web",app:"app"},Orientation:{landscape:"landscape",portrait:"portrait",element:"html"},hash:{},todo:{},container:{},msg:{info:"#msg"},name:"app",version:"1.0.3",build:"1.0.2"},document:function(t){t.hasOwnProperty("config")&&t.config.constructor===Object&&(this.config.merge(t.config),t.config.hasOwnProperty("Meta")&&t.config.Meta.hasOwnProperty("agent")&&(this.config.Meta.agent=t.config.Meta.agent)),n.addEventListener("DOMContentLoaded",function(){t.hasOwnProperty("ready")&&t.ready.call(a.root,event),"string"==typeof a.root.config.msg.info&&(a.root.config.msg.info=n.querySelector(a.root.config.msg.info)),a.idUnique(a.root.config.id),1!=a.root.config.Orientation.isEmpty()&&a.device.orientate(e.hasOwnProperty.call(e,"onorientationchange")?"orientationchange":"resize"),"object"==typeof a.root.config.Meta?a.meta.append(a.device.agent(a.root.config.Meta.agent)):a.meta.listen(),new MutationObserver(function(t){a.root.dataLink()}).observe(n.body,{attributes:!0,subtree:!0})},!1)},notification:function(){if(null!==this.config.msg.info)return arguments.length>1?this.config.msg.info.setAttribute(arguments[0],arguments[1]):this.config.msg.info.innerHTML=arguments[0],this.config.msg.info},dataLink:function(t){a.data.link(t?t:this.config.dataLink)},dataContent:function(t){a.data.content(t?t:this.config.dataContent)},metaLink:function(t){t.each(function(t,i){e[i]=n.querySelector("link[rel=0]".replace(0,i)).getAttribute("href")})},metaContent:function(t){t.each(function(t,i){e[i]=n.querySelector("meta[name=0]".replace(0,i)).getAttribute("content")})},localStorage:{name:{},storage:e.localStorage,select:function(t,e){var e=this.storage.getItem(this.ids(t));try{this.name[t]=e?JSON.parse(e):{}}catch(n){this.name[t]=e}finally{return this}},insert:function(t,e){var n=this.ids(t);return"object"==typeof e?this.storage.setItem(n,JSON.stringify(e)):this.storage.setItem(n,e),this.name[t]=e,this},update:function(t,e){return this.insert(t,e||this.name[t])},delete:function(t){return this.storage.removeItem(this.ids(t)),this},deleteAll:function(t){return this.storage.clear(),this},ids:function(t){return a.root.config.idUnique.replace(/unique/,t)}},hashChange:function(t){e.addEventListener("hashchange",function(e){"function"==typeof t&&(a.hash(),t(e))},!1)},Toggle:{menu:function(t,e,n){var i=t.parentNode,o=function(){for(var n=t.nextElementSibling.firstElementChild;n.firstChild;)n.removeChild(n.firstChild);"function"==typeof e&&e(n)},r=function(t){i.contains(t.target)||s()},s=function(){i.classList.remove("active"),document.body.removeEventListener(a.root.config.Handler,r),"function"==typeof n&&n()};i.classList.contains("active")&&o(),t.eventClick(function(t){i.toggleClass("active",function(){document.body.addEventListener(a.root.config.Handler,r),o()},function(){s()})})},dialog:function(t,e){if(a.root.hasOwnProperty("dialog")&&a.root.dialog.hasOwnProperty("container")){var n=a.root.dialog.container(),i=n.firstElementChild,o=function(){var e=i.firstElementChild.emptyContainer();"function"==typeof t&&t(e)},r=function(){n.styleDisplay("none").removeClick(c)},s=function(){"function"==typeof e&&e(n).then(r)},c=function(t){var e=t.target;i.contains(e)&&(e.classList.contains("okey")?s():e.classList.contains("cancel")&&r())};o(),n.styleDisplay("block").eventClick(c)}},nav:function(t,e,n){if(a.root.hasOwnProperty("nav")&&a.root.nav.hasOwnProperty("container")){var i=a.root.localStorage.name.query.page,o=a.root.nav.container(),r=o.firstElementChild,s=r.firstElementChild,c=s.nextElementSibling,u=function(){var t=c.firstElementChild;if(t){var n=t.querySelector("li.active");n&&n.getAttribute("id")!=i&&(n.classList.remove("active"),t.querySelector("#"+i).classList.add("active"))}else t=c.appendChild(document.createElement("ul")),a.root.config.page.each(function(e,n){var i=document.createElement("li"),o=document.createElement("p"),r=document.createElement("a");r.setAttribute("href","#page?".replace(/page/,e));var s=a.root.nav.hasOwnProperty("pageName")?a.root.nav.pageName(e):e;r.classList.add(n.class),r.setAttribute("data-title",s),i.setAttribute("id",e),i.setAttribute("title",s),a.root.localStorage.name.query.page==e&&i.classList.add("active"),o.appendChild(r),i.appendChild(o),t.appendChild(i)});"function"==typeof e&&e(o)},f=function(e){r.contains(e.target)||e.target==t||l(),e.stopPropagation()},l=function(){r.setAttribute("class","slide-out"),c.emptyContainer(),"function"==typeof n&&n(o),document.body.classList.contains("nav")||document.body.removeClick(f),o.styleDisplay("none")};return o.styleDisplay()&&u(),t.eventClick(function(t){o.toggleDisplay(function(){r.setAttribute("class","slide-in"),u(),document.body.classList.contains("nav")||document.body.eventClick(f)},function(){l()}),t.stopPropagation()},!1),o}},header:function(t,e,n){if(a.root.hasOwnProperty("header")&&a.root.header.hasOwnProperty("container")){var i=a.root.header.container(),o=i.firstElementChild,r=o.lastElementChild,s=r.firstElementChild,c=r.querySelector("ul."+a.root.localStorage.name.query.page),u=r.querySelector("ul.active");return new Promise(function(t,e){c?c.classList.contains("active")!==!0?(u&&u.classList.remove("active"),c.classList.add("active"),t()):e():s.classList.contains("active")!==!0?(s!=u&&u&&u.classList.remove("active"),s.classList.add("active"),t()):e()}).then(function(){return!0},function(){return!1})}},main:function(t){if(a.root.hasOwnProperty("main")&&a.root.main.hasOwnProperty("container")){var e=a.root.main.container(),n="div.active",i=e.querySelector(n),o=e.querySelector(n.replace("active",a.root.localStorage.name.query.page));return o?o.classList.contains("active")||o.classList.add("active"):(o=e.firstElementChild,o.classList.contains("active")||o.classList.add("active")),i&&o!=i&&i.classList.remove("active"),t&&o.emptyContainer(),o}},footer:function(t,e,n){}}}};e[t]=function(t){return new a.init(t)}}("scriptive",window,document);